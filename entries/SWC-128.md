# Title
DoS With Block Gas Limit

## Relationships
[CWE-400: Uncontrolled Resource Consumption](https://cwe.mitre.org/data/definitions/400.html)

## Description
When smart contracts deploy into Ethereum blockchain or functions inside them are called, these actions always require a certain amount of gas to be executed, based of how much computation is needed to run each of them completely.
The Ethereum network has a total gas limit, it changes dynamically based of gas used in the last blocks mined, it sets a threshold that should not be exceeded for every single action (deploy a contract, functions call). An action that surpass the actual gas limit (out of gas) is stuck, it will be reject by miners.
It can happen using loops in code with many iterations and during the phase of empty completely a large array.

## Remediation
The use of loop into smart contracts is recommended only when strictly necessary, the number of iterations should be low in any case. For the case of empty an array, the best case is simply not to clear all elements but keep a separate count of live elements. For the action of empty a large array it can simply set the count of live element to zero.
In case of an important action (function needs to be called for receive a token prize) stuck cause gas limit, there could be a risky way that consists of spamming the network to attempt an increase of gas limit, it could be very expensive.

## References
* [Clear Large Array Without Blowing Gas Limit](https://ethereum.stackexchange.com/questions/3373/how-to-clear-large-arrays-without-blowing-the-gas-limit)
* [GovernMental jackpot payout DoS Gas](https://www.reddit.com/r/ethereum/comments/4ghzhv/governmentals_1100_eth_jackpot_payout_is_stuck/)
* [What is gas, gas limit, gas price](https://masterthecrypto.com/ethereum-what-is-gas-gas-limit-gas-price/)
